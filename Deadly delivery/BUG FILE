-- Fast Stamina Regeneration Only
-- Focuses on instant regen without blocking game mechanics

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

print("â³ Loading Fast Stamina Regen...")
task.wait(2)

-- Load required modules
local Value = require(ReplicatedStorage.Shared.Core.Value)
local Config = require(ReplicatedStorage.Config)
local Buff = require(ReplicatedStorage.Shared.Features.Buff)

-- Get original values
local maxStamina = Config.Property.StaminaSystem.stamina.default
local originalRegen = Config.Property.StaminaSystem.naturalRecovery
local originalDelay = Config.Property.StaminaSystem.delayRecoveryTime

print("ğŸ“Š Original Settings:")
print("  Max Stamina:", maxStamina)
print("  Regen Rate:", originalRegen)
print("  Regen Delay:", originalDelay)

-- ===== BOOST 1: INCREASE REGEN SPEED =====
-- Multiply regen speed by 500x (super fast recovery)
Config.Property.StaminaSystem.naturalRecovery = originalRegen * 500

print("âœ“ Regen speed boosted: " .. originalRegen .. " â†’ " .. (originalRegen * 500))

-- ===== BOOST 2: REMOVE REGEN DELAY =====
-- Set delay to 0 so regen starts immediately
Config.Property.StaminaSystem.delayRecoveryTime = 0

print("âœ“ Regen delay removed: " .. originalDelay .. " â†’ 0")

-- ===== BOOST 3: HOOK BUFF SYSTEM FOR REGEN =====
-- Override StaminaRegenRate buff to always boost regen
Buff.OnChanged("StaminaRegenRate", function(arg1, arg2, arg3)
    -- Apply massive multiplier to any regen buff
    Config.Property.StaminaSystem.naturalRecovery = (originalRegen + arg2) * 500
    print("ğŸ”¥ Regen buff applied with 500x multiplier")
end, {
    replay = true
})

print("âœ“ Buff system hooked for max regen")

-- ===== BOOST 4: FORCE INSTANT RECOVERY =====
-- When stamina drops below max, boost regen even more
local boostConnection = RunService.Heartbeat:Connect(function()
    local currentStamina = Value.Stamina
    
    -- If stamina is not full, temporarily boost regen to instant
    if currentStamina < maxStamina then
        -- Add instant regen boost
        local regenAmount = (maxStamina - currentStamina) * 0.5 -- Recover 50% of missing stamina per frame
        Value.Stamina = math.min(currentStamina + regenAmount, maxStamina)
    end
end)

print("âœ“ Instant recovery active when stamina depletes")

-- ===== MONITOR REGEN IN ACTION =====
local lastStamina = maxStamina
task.spawn(function()
    while task.wait(1) do
        local currentStamina = Value.Stamina
        if currentStamina ~= lastStamina then
            local change = currentStamina - lastStamina
            local changeSymbol = change > 0 and "â–²" or "â–¼"
            print(string.format("ğŸ’ª Stamina %s: %.1f (%.1f/sec)", 
                changeSymbol, currentStamina, change))
        end
        lastStamina = currentStamina
    end
end)

print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("âœ… FAST REGEN ACTIVATED!")
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("Benefits:")
print("  â€¢ Regen speed: 500x faster")
print("  â€¢ Regen delay: Removed")
print("  â€¢ Instant recovery when depleted")
print("  â€¢ Normal running mechanics")
print("")
print("Your stamina will regenerate INSTANTLY!")
print("Press F9 to monitor regen rate")
print("")
print("To disable: _G.DisableFastRegen()")

-- Disable function
_G.DisableFastRegen = function()
    if boostConnection then
        boostConnection:Disconnect()
    end
    
    -- Restore original values
    Config.Property.StaminaSystem.naturalRecovery = originalRegen
    Config.Property.StaminaSystem.delayRecoveryTime = originalDelay
    
    print("âŒ Fast Regen DISABLED")
    print("Stamina system restored to normal")
end

print("âœ… Ready! Your stamina now regens INSTANTLY!")
